# 项目功能分析与扩展建议

基于对现有代码库的深入分析，本项目（玄学时机/XuanXue）已经具备了核心的八字排盘、五行能量计算和基础运势分析功能。为了进一步提升专业度、用户体验和应用价值，我建议从以下几个维度进行功能扩展。

## 1. 核心功能增强 (Core Enhancements)

这些功能直接关系到命理计算的准确性和专业性，是提升产品竞争力的关键。

### 1.1 多用户档案管理 (Multi-Profile System)
*   **现状**: 目前仅支持单用户 (`profile`)，数据覆盖即丢失。
*   **建议**:
    *   **档案列表**: 允许用户创建、编辑、删除多个档案（如：本人、配偶、子女、合作伙伴）。
    *   **快速切换**: 在首页或侧边栏提供档案切换入口，一键查看不同人的今日运势。
    *   **关系分析 (合盘)**: 基于两个档案的八字，计算五行互补度、性格契合度（如：日主生克、五行互缺）。

### 1.2 真太阳时校正 (True Solar Time)
*   **现状**: 直接使用用户输入的钟表时间。
*   **痛点**: 八字排盘必须使用由于经度差异导致的“真太阳时”，而非行政时区时间。偏差可能导致时柱错误。
*   **建议**:
    *   **出生地输入**: 增加出生地选择（省/市/区），通过内置经纬度库查询经度。
    *   **自动校正**: 根据出生日期和经度，计算平太阳时 -> 真太阳时，再进行排盘。

### 1.3 完善神煞系统 (Advanced ShenSha)
*   **现状**: 仅实现了日破、岁破、桃花、贵人、文昌/驿马等少数神煞。
*   **建议**:
    *   **扩充神煞库**: 增加天乙贵人（区分阴阳）、太极贵人、魁罡、羊刃、金舆、红鸾、天喜等常用神煞。
    *   **神煞解读**: 为每个神煞提供详细的解释文案，说明其在流年/流月/流日中的吉凶影响。

### 1.4 早晚子时处理
*   **现状**: 代码中未明确区分早子时（00:00-01:00）和晚子时（23:00-24:00）。
*   **建议**: 增加设置选项，允许用户选择“分早晚子时”或“不分”（全按次日算），以适应不同流派的排盘习惯。

## 2. 业务功能扩展 (Feature Expansion)

### 2.1 智能择日/择吉 (Auspicious Date Selection)
*   **现状**: 侧重于“今日”的时辰能量。
*   **建议**:
    *   **月历视图**: 提供一个日历组件，通过颜色深浅标记整个月的“能量高低”或“吉凶趋势”。
    *   **特定事项择日**: 用户选择事项（如：谈判、理发、搬家），系统推荐未来 30 天内的最佳日期和时辰。

### 2.2 六爻/占卜模块 (Divination Module)
*   **现状**: 仅基于命理（八字）。
*   **建议**:
    *   **具体事占**: 引入六爻起卦或梅花易数，解决用户“当下具体决策”的疑惑（如：这件事能不能成？）。
    *   **起卦方式**: 支持数字起卦、时间起卦或随机摇卦（利用设备陀螺仪）。

### 2.3 现代化生活建议
*   **现状**: 简单的五行建议。
*   **建议**:
    *   **穿搭指南**: 根据今日喜用神，推荐穿衣颜色、配饰材质。
    *   **方位建议**: 利用手机指南针，指出今日财神/贵人方位，指导办公桌朝向或出行方向。

## 3. UI/UX 体验优化

### 3.1 交互式排盘详解
*   **现状**: 静态展示。
*   **建议**: 点击八字中的任意一字（如“甲”），弹出侧边栏解释其含义（五行属木、十神为偏财、在当前季节的状态等）。

### 3.2 桌面小组件 (Widgets)
*   **建议**: 开发 iOS/Android 桌面小组件（如果是 PWA，可利用 Web Widgets），实时展示当前时辰能量和宜忌。

### 3.3 数据可视化升级
*   **建议**:
    *   **运势曲线**: 将“今日能量”改为 7 天或 30 天的折线图，展示长期趋势。
    *   **五行流通图**: 使用桑基图 (Sankey Diagram) 展示原局五行的流通生克关系。

## 4. 技术架构升级

*   **PWA 离线能力**: 确保所有计算在无网环境下完全可用。
*   **云同步 (可选)**: 利用 WebDAV 或简单的云存储 API，允许用户跨设备同步档案数据。
*   **国际化 (i18n)**: 支持繁体中文（港台用户群体大）和英文（海外玄学兴趣者）。

## 实施路线图建议

1.  **阶段一（基础巩固）**: 实现多用户档案、真太阳时、早晚子时。
2.  **阶段二（内容丰富）**: 扩充神煞库、增加月历视图、优化解释文案。
3.  **阶段三（高级功能）**: 引入六爻占卜、关系合盘、桌面小组件。
